<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700" viewBox="0 0 1200 700">
  <style>
    .title { font: 700 28px/1.2 "Segoe UI", Roboto, sans-serif; fill:#0f172a; }
    .subtitle { font: 400 14px/1.2 "Segoe UI", Roboto, sans-serif; fill:#334155; }
    .box { fill:#ffffff; stroke:#94a3b8; stroke-width:2; rx:12; ry:12; }
    .box-frontend { fill: #e6f6ff; stroke:#38bdf8; }
    .box-backend { fill: #fff7ed; stroke:#fb923c; }
    .box-db { fill: #f0fdf4; stroke:#34d399; }
    .box-api { fill: #f8f0ff; stroke:#a78bfa; }
    .arrow { stroke:#475569; stroke-width:3; marker-end: url(#arrowhead); }
    .label { font: 600 13px/1 "Segoe UI", Roboto, sans-serif; fill:#0f172a; }
    .small { font: 400 12px/1 "Segoe UI", Roboto, sans-serif; fill:#475569; }
    .badge { font: 700 11px/1 "Segoe UI", Roboto, sans-serif; fill:#ffffff; }
  </style>

  <!-- Definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"></polygon>
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="6" stdDeviation="8" flood-color="#000" flood-opacity="0.12"></feDropShadow>
    </filter>
  </defs>

  <!-- Title -->
  <text x="40" y="48" class="title">LumiAI — System Architecture</text>
  <text x="40" y="74" class="subtitle">Frontend → API Gateway → Backend → Stability AI → Storage &amp; DB</text>

  <!-- Frontend box -->
  <rect x="40" y="110" width="300" height="120" class="box box-frontend" filter="url(#shadow)"></rect>
  <text x="60" y="148" class="label">React.js + Tailwind</text>
  <text x="60" y="172" class="small">Multi-tab UI • Prompt input • Auth (JWT)</text>

  <!-- API Gateway -->
  <rect x="420" y="110" width="220" height="72" class="box" style="fill:#f8fafc; stroke:#64748b;"></rect>
  <text x="440" y="148" class="label">API Gateway / Nginx</text>
  <text x="440" y="168" class="small">SSL, routing, rate-limiting</text>

  <!-- Backend box -->
  <rect x="700" y="80" width="420" height="200" class="box box-backend" filter="url(#shadow)"></rect>
  <text x="720" y="110" class="label">Spring Boot Backend</text>
  <text x="720" y="136" class="small">Controllers • Services • FeignClient</text>
  <text x="720" y="156" class="small">Spring Security • JWT • Job Queue</text>

  <!-- Stability AI box -->
  <rect x="700" y="320" width="260" height="100" class="box box-api"></rect>
  <text x="720" y="355" class="label">Stability AI (3rd-party)</text>
  <text x="720" y="377" class="small">Text2Img • Img2Img</text>

  <!-- Storage / DB -->
  <rect x="100" y="320" width="260" height="120" class="box box-db"></rect>
  <text x="120" y="352" class="label">MongoDB / S3 (Storage)</text>
  <text x="120" y="374" class="small">Users • Jobs • Image URLs</text>

  <!-- Background Worker box -->
  <rect x="420" y="320" width="220" height="120" class="box" style="fill:#fffaf0; stroke:#f97316;"></rect>
  <text x="440" y="352" class="label">Background Worker</text>
  <text x="440" y="374" class="small">Async tasks • Queue processing • Retries</text>

  <!-- Arrows: Frontend -> Gateway -> Backend -->
  <line x1="340" y1="170" x2="420" y2="146" class="arrow"></line>
  <line x1="640" y1="146" x2="700" y2="150" class="arrow"></line>

  <!-- Backend -> Stability AI -->
  <line x1="820" y1="280" x2="820" y2="320" class="arrow"></line>

  <!-- Backend -> DB -->
  <line x1="760" y1="380" x2="360" y2="380" class="arrow"></line>

  <!-- Backend -> Worker -->
  <line x1="760" y1="230" x2="640" y2="320" class="arrow"></line>

  <!-- Worker -> Stability AI -->
  <line x1="540" y1="380" x2="700" y2="380" class="arrow"></line>

  <!-- DB -> Frontend (via backend) -->
  <line x1="200" y1="320" x2="200" y2="230" stroke="#475569" stroke-width="2" stroke-dasharray="6,4" marker-end="url(#arrowhead)"></line>

  <!-- Legend -->
  <rect x="40" y="460" width="1120" height="200" rx="8" ry="8" class="box" style="fill:#ffffff; stroke:#e2e8f0;"></rect>
  <text x="60" y="494" class="label">Legend &amp; Notes</text>
  <text x="60" y="520" class="small">• JWT stored in Authorization header (Bearer token)</text>
  <text x="60" y="540" class="small">• FeignClient used for Stability AI integration</text>
  <text x="60" y="560" class="small">• Background worker (RabbitMQ / SQS) recommended for async jobs</text>
  <text x="60" y="580" class="small">• Use presigned S3 URLs to serve images securely</text>

  <!-- Footer badges -->
  <rect x="760" y="520" width="340" height="36" rx="6" ry="6" style="fill:#38bdf8;"></rect>
  <text x="780" y="544" class="badge">Frontend: React + Tailwind</text>
  <rect x="760" y="564" width="340" height="36" rx="6" ry="6" style="fill:#fb923c;"></rect>
  <text x="780" y="588" class="badge">Backend: Spring Boot + Feign</text>
</svg>
